import 'dart:convert';

import 'package:get/get.dart';
import 'package:ifes_solar/controllers/panel_controller.dart';
import 'package:ifes_solar/controllers/simulation_controller.dart';
import 'package:ifes_solar/models/forecast.dart';
import 'package:ifes_solar/repositories/forecast_repository.dart';
import 'package:ifes_solar/utils/date.dart';
import 'package:ifes_solar/utils/energy.dart';

class ForecastController {
  final ForecastRepository forecastRepository;

  final _forecast = Forecast(forecastDataList: []).obs;
  var _isForecastLoading = false.obs;
  var _shouldShowForecast = false.obs;

  final PanelController panelController = Get.find<PanelController>();
  final SimulationController simulationController =
      Get.find<SimulationController>();

  ForecastController({required this.forecastRepository});

  Forecast get forecast => _forecast.value;

  bool get isForecastLoading => _isForecastLoading.value;

  bool get shouldShowForecast => _shouldShowForecast.value;

  void setForecast(Forecast value) {
    _forecast.value = value;
  }

  void setIsForecastLoading(bool value) {
    _isForecastLoading.value = value;
  }

  void setShouldShowForecast(bool value) {
    _shouldShowForecast.value = value;
  }

  Future getForecast(double latitude, double longitude) async {
    try {
      setIsForecastLoading(true);
      var response =
          await this.forecastRepository.getForecast(latitude, longitude);
      if (response.body != null) {
        var body = jsonDecode(response.body);
        final List<Map<String, dynamic>> forecasts = [];
        for (var item in body['forecasts']!) {
          final energy = getGeneratedEnergy(
            incidence: item['ghi']!.toDouble(),
            panel: simulationController.selectedPanel,
            area: simulationController.selectedArea,
          );
          forecasts
              .add({'date': formatDate(item['period_end']), 'energy': energy});
        }

        final forecast = Forecast.createForecast(forecasts);
        setForecast(forecast);
        setShouldShowForecast(true);
      } else {
        setShouldShowForecast(false);
      }
    } catch (error) {
      setShouldShowForecast(false);
    } finally {
      setIsForecastLoading(false);
    }
  }
}

final Map<String, dynamic> res = {
  "forecasts": [
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 21,
      "zenith": 147,
      "azimuth": 85,
      "cloud_opacity": 22,
      "period_end": "2023-05-19T00:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 20,
      "zenith": 154,
      "azimuth": 87,
      "cloud_opacity": 27,
      "period_end": "2023-05-19T01:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 20,
      "zenith": 161,
      "azimuth": 89,
      "cloud_opacity": 41,
      "period_end": "2023-05-19T01:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 20,
      "zenith": 168,
      "azimuth": 92,
      "cloud_opacity": 37,
      "period_end": "2023-05-19T02:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 175,
      "azimuth": 101,
      "cloud_opacity": 26,
      "period_end": "2023-05-19T02:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 178,
      "azimuth": -135,
      "cloud_opacity": 19,
      "period_end": "2023-05-19T03:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 171,
      "azimuth": -95,
      "cloud_opacity": 18,
      "period_end": "2023-05-19T03:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 164,
      "azimuth": -90,
      "cloud_opacity": 23,
      "period_end": "2023-05-19T04:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 157,
      "azimuth": -88,
      "cloud_opacity": 26,
      "period_end": "2023-05-19T04:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 150,
      "azimuth": -86,
      "cloud_opacity": 28,
      "period_end": "2023-05-19T05:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 18,
      "zenith": 143,
      "azimuth": -84,
      "cloud_opacity": 30,
      "period_end": "2023-05-19T05:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 18,
      "zenith": 136,
      "azimuth": -83,
      "cloud_opacity": 30,
      "period_end": "2023-05-19T06:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 18,
      "zenith": 129,
      "azimuth": -81,
      "cloud_opacity": 31,
      "period_end": "2023-05-19T06:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 18,
      "zenith": 122,
      "azimuth": -79,
      "cloud_opacity": 31,
      "period_end": "2023-05-19T07:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 18,
      "zenith": 115,
      "azimuth": -77,
      "cloud_opacity": 31,
      "period_end": "2023-05-19T07:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 18,
      "zenith": 108,
      "azimuth": -75,
      "cloud_opacity": 33,
      "period_end": "2023-05-19T08:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 18,
      "zenith": 102,
      "azimuth": -73,
      "cloud_opacity": 34,
      "period_end": "2023-05-19T08:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 18,
      "zenith": 95,
      "azimuth": -71,
      "cloud_opacity": 35,
      "period_end": "2023-05-19T09:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 11,
      "ghi90": 17,
      "ghi10": 6,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 85,
      "dhi": 11,
      "air_temp": 18,
      "zenith": 88,
      "azimuth": -69,
      "cloud_opacity": 35,
      "period_end": "2023-05-19T09:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 68,
      "ghi90": 98,
      "ghi10": 35,
      "ebh": 5,
      "dni": 30,
      "dni10": 0,
      "dni90": 439,
      "dhi": 63,
      "air_temp": 18,
      "zenith": 82,
      "azimuth": -66,
      "cloud_opacity": 31,
      "period_end": "2023-05-19T10:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 167,
      "ghi90": 198,
      "ghi10": 93,
      "ebh": 77,
      "dni": 296,
      "dni10": 0,
      "dni90": 597,
      "dhi": 90,
      "air_temp": 19,
      "zenith": 76,
      "azimuth": -62,
      "cloud_opacity": 16,
      "period_end": "2023-05-19T10:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 273,
      "ghi90": 300,
      "ghi10": 165,
      "ebh": 174,
      "dni": 493,
      "dni10": 0,
      "dni90": 686,
      "dhi": 99,
      "air_temp": 20,
      "zenith": 69,
      "azimuth": -59,
      "cloud_opacity": 9,
      "period_end": "2023-05-19T11:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 367,
      "ghi90": 397,
      "ghi10": 232,
      "ebh": 252,
      "dni": 567,
      "dni10": 0,
      "dni90": 743,
      "dhi": 114,
      "air_temp": 21,
      "zenith": 64,
      "azimuth": -54,
      "cloud_opacity": 8,
      "period_end": "2023-05-19T11:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 439,
      "ghi90": 487,
      "ghi10": 281,
      "ebh": 291,
      "dni": 549,
      "dni10": 0,
      "dni90": 782,
      "dhi": 148,
      "air_temp": 22,
      "zenith": 58,
      "azimuth": -49,
      "cloud_opacity": 10,
      "period_end": "2023-05-19T12:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 497,
      "ghi90": 566,
      "ghi10": 326,
      "ebh": 313,
      "dni": 519,
      "dni10": 0,
      "dni90": 811,
      "dhi": 184,
      "air_temp": 22,
      "zenith": 53,
      "azimuth": -43,
      "cloud_opacity": 12,
      "period_end": "2023-05-19T12:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 539,
      "ghi90": 633,
      "ghi10": 369,
      "ebh": 316,
      "dni": 476,
      "dni10": 1,
      "dni90": 834,
      "dhi": 223,
      "air_temp": 23,
      "zenith": 48,
      "azimuth": -36,
      "cloud_opacity": 15,
      "period_end": "2023-05-19T13:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 572,
      "ghi90": 686,
      "ghi10": 404,
      "ebh": 319,
      "dni": 448,
      "dni10": 8,
      "dni90": 848,
      "dhi": 253,
      "air_temp": 23,
      "zenith": 45,
      "azimuth": -28,
      "cloud_opacity": 17,
      "period_end": "2023-05-19T13:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 601,
      "ghi90": 722,
      "ghi10": 424,
      "ebh": 334,
      "dni": 448,
      "dni10": 6,
      "dni90": 855,
      "dhi": 267,
      "air_temp": 23,
      "zenith": 42,
      "azimuth": -19,
      "cloud_opacity": 17,
      "period_end": "2023-05-19T14:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 619,
      "ghi90": 743,
      "ghi10": 430,
      "ebh": 346,
      "dni": 453,
      "dni10": 0,
      "dni90": 857,
      "dhi": 274,
      "air_temp": 24,
      "zenith": 40,
      "azimuth": -8,
      "cloud_opacity": 17,
      "period_end": "2023-05-19T14:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 625,
      "ghi90": 747,
      "ghi10": 423,
      "ebh": 352,
      "dni": 459,
      "dni10": 0,
      "dni90": 856,
      "dhi": 273,
      "air_temp": 24,
      "zenith": 40,
      "azimuth": 3,
      "cloud_opacity": 16,
      "period_end": "2023-05-19T15:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 626,
      "ghi90": 735,
      "ghi10": 419,
      "ebh": 371,
      "dni": 491,
      "dni10": 0,
      "dni90": 854,
      "dhi": 255,
      "air_temp": 24,
      "zenith": 41,
      "azimuth": 14,
      "cloud_opacity": 15,
      "period_end": "2023-05-19T15:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 621,
      "ghi90": 707,
      "ghi10": 419,
      "ebh": 402,
      "dni": 552,
      "dni10": 13,
      "dni90": 851,
      "dhi": 219,
      "air_temp": 24,
      "zenith": 43,
      "azimuth": 24,
      "cloud_opacity": 12,
      "period_end": "2023-05-19T16:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 605,
      "ghi90": 662,
      "ghi10": 394,
      "ebh": 430,
      "dni": 625,
      "dni10": 13,
      "dni90": 839,
      "dhi": 175,
      "air_temp": 24,
      "zenith": 46,
      "azimuth": 32,
      "cloud_opacity": 8,
      "period_end": "2023-05-19T16:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 583,
      "ghi90": 601,
      "ghi10": 345,
      "ebh": 468,
      "dni": 740,
      "dni10": 0,
      "dni90": 816,
      "dhi": 114,
      "air_temp": 24,
      "zenith": 51,
      "azimuth": 40,
      "cloud_opacity": 3,
      "period_end": "2023-05-19T17:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 527,
      "ghi90": 527,
      "ghi10": 289,
      "ebh": 446,
      "dni": 787,
      "dni10": 0,
      "dni90": 787,
      "dhi": 81,
      "air_temp": 24,
      "zenith": 55,
      "azimuth": 47,
      "cloud_opacity": 0,
      "period_end": "2023-05-19T17:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 441,
      "ghi90": 441,
      "ghi10": 232,
      "ebh": 365,
      "dni": 748,
      "dni10": 0,
      "dni90": 748,
      "dhi": 76,
      "air_temp": 24,
      "zenith": 61,
      "azimuth": 52,
      "cloud_opacity": 0,
      "period_end": "2023-05-19T18:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 345,
      "ghi90": 345,
      "ghi10": 175,
      "ebh": 277,
      "dni": 694,
      "dni10": 0,
      "dni90": 694,
      "dhi": 69,
      "air_temp": 23,
      "zenith": 67,
      "azimuth": 57,
      "cloud_opacity": 0,
      "period_end": "2023-05-19T18:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 244,
      "ghi90": 244,
      "ghi10": 117,
      "ebh": 186,
      "dni": 617,
      "dni10": 0,
      "dni90": 617,
      "dhi": 59,
      "air_temp": 23,
      "zenith": 73,
      "azimuth": 61,
      "cloud_opacity": 0,
      "period_end": "2023-05-19T19:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 136,
      "ghi90": 142,
      "ghi10": 58,
      "ebh": 81,
      "dni": 401,
      "dni10": 0,
      "dni90": 493,
      "dhi": 54,
      "air_temp": 23,
      "zenith": 79,
      "azimuth": 64,
      "cloud_opacity": 6,
      "period_end": "2023-05-19T19:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 42,
      "ghi90": 50,
      "ghi10": 17,
      "ebh": 9,
      "dni": 85,
      "dni10": 0,
      "dni90": 240,
      "dhi": 33,
      "air_temp": 22,
      "zenith": 85,
      "azimuth": 67,
      "cloud_opacity": 15,
      "period_end": "2023-05-19T20:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 1,
      "ghi90": 1,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 3,
      "dhi": 1,
      "air_temp": 22,
      "zenith": 92,
      "azimuth": 70,
      "cloud_opacity": 15,
      "period_end": "2023-05-19T20:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 22,
      "zenith": 98,
      "azimuth": 72,
      "cloud_opacity": 15,
      "period_end": "2023-05-19T21:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 21,
      "zenith": 105,
      "azimuth": 74,
      "cloud_opacity": 15,
      "period_end": "2023-05-19T21:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 21,
      "zenith": 112,
      "azimuth": 76,
      "cloud_opacity": 15,
      "period_end": "2023-05-19T22:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 21,
      "zenith": 119,
      "azimuth": 78,
      "cloud_opacity": 15,
      "period_end": "2023-05-19T22:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 21,
      "zenith": 126,
      "azimuth": 80,
      "cloud_opacity": 15,
      "period_end": "2023-05-19T23:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 20,
      "zenith": 133,
      "azimuth": 82,
      "cloud_opacity": 15,
      "period_end": "2023-05-19T23:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 20,
      "zenith": 140,
      "azimuth": 83,
      "cloud_opacity": 15,
      "period_end": "2023-05-20T00:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 20,
      "zenith": 147,
      "azimuth": 85,
      "cloud_opacity": 15,
      "period_end": "2023-05-20T00:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 154,
      "azimuth": 87,
      "cloud_opacity": 15,
      "period_end": "2023-05-20T01:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 161,
      "azimuth": 89,
      "cloud_opacity": 15,
      "period_end": "2023-05-20T01:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 168,
      "azimuth": 91,
      "cloud_opacity": 15,
      "period_end": "2023-05-20T02:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 175,
      "azimuth": 98,
      "cloud_opacity": 15,
      "period_end": "2023-05-20T02:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 178,
      "azimuth": -131,
      "cloud_opacity": 15,
      "period_end": "2023-05-20T03:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 171,
      "azimuth": -93,
      "cloud_opacity": 16,
      "period_end": "2023-05-20T03:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 164,
      "azimuth": -90,
      "cloud_opacity": 16,
      "period_end": "2023-05-20T04:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 157,
      "azimuth": -87,
      "cloud_opacity": 17,
      "period_end": "2023-05-20T04:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 150,
      "azimuth": -86,
      "cloud_opacity": 17,
      "period_end": "2023-05-20T05:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 143,
      "azimuth": -84,
      "cloud_opacity": 17,
      "period_end": "2023-05-20T05:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 136,
      "azimuth": -82,
      "cloud_opacity": 17,
      "period_end": "2023-05-20T06:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 19,
      "zenith": 129,
      "azimuth": -81,
      "cloud_opacity": 17,
      "period_end": "2023-05-20T06:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 18,
      "zenith": 122,
      "azimuth": -79,
      "cloud_opacity": 17,
      "period_end": "2023-05-20T07:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 18,
      "zenith": 115,
      "azimuth": -77,
      "cloud_opacity": 17,
      "period_end": "2023-05-20T07:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 18,
      "zenith": 108,
      "azimuth": -75,
      "cloud_opacity": 17,
      "period_end": "2023-05-20T08:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 18,
      "zenith": 102,
      "azimuth": -73,
      "cloud_opacity": 17,
      "period_end": "2023-05-20T08:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 18,
      "zenith": 95,
      "azimuth": -71,
      "cloud_opacity": 17,
      "period_end": "2023-05-20T09:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 12,
      "ghi90": 15,
      "ghi10": 4,
      "ebh": 0,
      "dni": 5,
      "dni10": 0,
      "dni90": 56,
      "dhi": 12,
      "air_temp": 18,
      "zenith": 88,
      "azimuth": -68,
      "cloud_opacity": 17,
      "period_end": "2023-05-20T09:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 78,
      "ghi90": 90,
      "ghi10": 26,
      "ebh": 26,
      "dni": 166,
      "dni10": 0,
      "dni90": 358,
      "dhi": 53,
      "air_temp": 18,
      "zenith": 82,
      "azimuth": -65,
      "cloud_opacity": 14,
      "period_end": "2023-05-20T10:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 186,
      "ghi90": 188,
      "ghi10": 68,
      "ebh": 127,
      "dni": 504,
      "dni10": 0,
      "dni90": 528,
      "dhi": 59,
      "air_temp": 19,
      "zenith": 76,
      "azimuth": -62,
      "cloud_opacity": 1,
      "period_end": "2023-05-20T10:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 289,
      "ghi90": 289,
      "ghi10": 120,
      "ebh": 222,
      "dni": 633,
      "dni10": 0,
      "dni90": 633,
      "dhi": 67,
      "air_temp": 20,
      "zenith": 70,
      "azimuth": -59,
      "cloud_opacity": 0,
      "period_end": "2023-05-20T11:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 387,
      "ghi90": 387,
      "ghi10": 174,
      "ebh": 313,
      "dni": 705,
      "dni10": 0,
      "dni90": 705,
      "dhi": 74,
      "air_temp": 21,
      "zenith": 64,
      "azimuth": -54,
      "cloud_opacity": 0,
      "period_end": "2023-05-20T11:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 477,
      "ghi90": 477,
      "ghi10": 226,
      "ebh": 399,
      "dni": 757,
      "dni10": 0,
      "dni90": 757,
      "dhi": 78,
      "air_temp": 21,
      "zenith": 58,
      "azimuth": -49,
      "cloud_opacity": 0,
      "period_end": "2023-05-20T12:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 556,
      "ghi90": 557,
      "ghi10": 279,
      "ebh": 473,
      "dni": 788,
      "dni10": 0,
      "dni90": 791,
      "dhi": 83,
      "air_temp": 22,
      "zenith": 53,
      "azimuth": -43,
      "cloud_opacity": 0,
      "period_end": "2023-05-20T12:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 601,
      "ghi90": 623,
      "ghi10": 332,
      "ebh": 478,
      "dni": 724,
      "dni10": 0,
      "dni90": 811,
      "dhi": 123,
      "air_temp": 23,
      "zenith": 49,
      "azimuth": -36,
      "cloud_opacity": 4,
      "period_end": "2023-05-20T13:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 627,
      "ghi90": 675,
      "ghi10": 378,
      "ebh": 459,
      "dni": 647,
      "dni10": 0,
      "dni90": 824,
      "dhi": 168,
      "air_temp": 23,
      "zenith": 45,
      "azimuth": -28,
      "cloud_opacity": 7,
      "period_end": "2023-05-20T13:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 657,
      "ghi90": 711,
      "ghi10": 411,
      "ebh": 475,
      "dni": 640,
      "dni10": 0,
      "dni90": 832,
      "dhi": 182,
      "air_temp": 23,
      "zenith": 42,
      "azimuth": -19,
      "cloud_opacity": 8,
      "period_end": "2023-05-20T14:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 674,
      "ghi90": 731,
      "ghi10": 432,
      "ebh": 485,
      "dni": 638,
      "dni10": 4,
      "dni90": 834,
      "dhi": 189,
      "air_temp": 23,
      "zenith": 40,
      "azimuth": -8,
      "cloud_opacity": 8,
      "period_end": "2023-05-20T14:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 677,
      "ghi90": 735,
      "ghi10": 441,
      "ebh": 485,
      "dni": 634,
      "dni10": 15,
      "dni90": 833,
      "dhi": 192,
      "air_temp": 23,
      "zenith": 40,
      "azimuth": 3,
      "cloud_opacity": 8,
      "period_end": "2023-05-20T15:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 665,
      "ghi90": 722,
      "ghi10": 433,
      "ebh": 475,
      "dni": 631,
      "dni10": 13,
      "dni90": 827,
      "dhi": 190,
      "air_temp": 23,
      "zenith": 41,
      "azimuth": 13,
      "cloud_opacity": 8,
      "period_end": "2023-05-20T15:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 639,
      "ghi90": 693,
      "ghi10": 409,
      "ebh": 454,
      "dni": 625,
      "dni10": 1,
      "dni90": 816,
      "dhi": 185,
      "air_temp": 23,
      "zenith": 43,
      "azimuth": 23,
      "cloud_opacity": 8,
      "period_end": "2023-05-20T16:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 608,
      "ghi90": 648,
      "ghi10": 373,
      "ebh": 446,
      "dni": 650,
      "dni10": 0,
      "dni90": 801,
      "dhi": 162,
      "air_temp": 23,
      "zenith": 47,
      "azimuth": 32,
      "cloud_opacity": 6,
      "period_end": "2023-05-20T16:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 572,
      "ghi90": 588,
      "ghi10": 325,
      "ebh": 451,
      "dni": 715,
      "dni10": 0,
      "dni90": 780,
      "dhi": 121,
      "air_temp": 23,
      "zenith": 51,
      "azimuth": 40,
      "cloud_opacity": 3,
      "period_end": "2023-05-20T17:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 514,
      "ghi90": 514,
      "ghi10": 271,
      "ebh": 422,
      "dni": 748,
      "dni10": 0,
      "dni90": 751,
      "dhi": 92,
      "air_temp": 23,
      "zenith": 56,
      "azimuth": 46,
      "cloud_opacity": 0,
      "period_end": "2023-05-20T17:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 425,
      "ghi90": 429,
      "ghi10": 216,
      "ebh": 332,
      "dni": 684,
      "dni10": 0,
      "dni90": 709,
      "dhi": 92,
      "air_temp": 23,
      "zenith": 61,
      "azimuth": 52,
      "cloud_opacity": 1,
      "period_end": "2023-05-20T18:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 332,
      "ghi90": 336,
      "ghi10": 162,
      "ebh": 250,
      "dni": 630,
      "dni10": 0,
      "dni90": 655,
      "dhi": 82,
      "air_temp": 23,
      "zenith": 67,
      "azimuth": 56,
      "cloud_opacity": 1,
      "period_end": "2023-05-20T18:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 237,
      "ghi90": 237,
      "ghi10": 107,
      "ebh": 173,
      "dni": 577,
      "dni10": 0,
      "dni90": 579,
      "dhi": 64,
      "air_temp": 23,
      "zenith": 73,
      "azimuth": 60,
      "cloud_opacity": 0,
      "period_end": "2023-05-20T19:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 127,
      "ghi90": 137,
      "ghi10": 53,
      "ebh": 66,
      "dni": 325,
      "dni10": 0,
      "dni90": 452,
      "dhi": 61,
      "air_temp": 22,
      "zenith": 79,
      "azimuth": 64,
      "cloud_opacity": 8,
      "period_end": "2023-05-20T19:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 39,
      "ghi90": 46,
      "ghi10": 15,
      "ebh": 6,
      "dni": 54,
      "dni10": 0,
      "dni90": 204,
      "dhi": 33,
      "air_temp": 22,
      "zenith": 85,
      "azimuth": 67,
      "cloud_opacity": 16,
      "period_end": "2023-05-20T20:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 1,
      "ghi90": 1,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 2,
      "dhi": 1,
      "air_temp": 22,
      "zenith": 92,
      "azimuth": 70,
      "cloud_opacity": 14,
      "period_end": "2023-05-20T20:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 21,
      "zenith": 98,
      "azimuth": 72,
      "cloud_opacity": 13,
      "period_end": "2023-05-20T21:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 21,
      "zenith": 105,
      "azimuth": 74,
      "cloud_opacity": 0,
      "period_end": "2023-05-20T21:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 21,
      "zenith": 112,
      "azimuth": 76,
      "cloud_opacity": 0,
      "period_end": "2023-05-20T22:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 21,
      "zenith": 119,
      "azimuth": 78,
      "cloud_opacity": 0,
      "period_end": "2023-05-20T22:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 21,
      "zenith": 126,
      "azimuth": 80,
      "cloud_opacity": 0,
      "period_end": "2023-05-20T23:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 20,
      "zenith": 133,
      "azimuth": 81,
      "cloud_opacity": 0,
      "period_end": "2023-05-20T23:30:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 20,
      "zenith": 140,
      "azimuth": 83,
      "cloud_opacity": 0,
      "period_end": "2023-05-21T00:00:00.0000000Z",
      "period": "PT30M"
    },
    {
      "ghi": 0,
      "ghi90": 0,
      "ghi10": 0,
      "ebh": 0,
      "dni": 0,
      "dni10": 0,
      "dni90": 0,
      "dhi": 0,
      "air_temp": 20,
      "zenith": 147,
      "azimuth": 85,
      "cloud_opacity": 14,
      "period_end": "2023-05-21T00:30:00.0000000Z",
      "period": "PT30M"
    }
  ]
};
